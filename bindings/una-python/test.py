import una
import asyncio

invoice = dict({
    "amount": 1000,
    "description": "test bindings"
})

async def lnd_rest():
    config_lnd_rest = dict({
        "url": "https://127.0.0.1:8081",
        "macaroon": "0201036c6e6402f801030a1090788030ebddcc36000f194b061613a41201301a160a0761646472657373120472656164120577726974651a130a04696e666f120472656164120577726974651a170a08696e766f69636573120472656164120577726974651a210a086d616361726f6f6e120867656e6572617465120472656164120577726974651a160a076d657373616765120472656164120577726974651a170a086f6666636861696e120472656164120577726974651a160a076f6e636861696e120472656164120577726974651a140a057065657273120472656164120577726974651a180a067369676e6572120867656e657261746512047265616400000620b1f79f1a88e156dff7b533a32a23abbe22546a6ef2e81dccd2991a2786007dff",
        "tls_certificate": "2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949434a7a43434163796741774942416749514f66564e7a49356e622b465831757662674844302b7a414b42676771686b6a4f50515144416a41784d5238770a485159445651514b45785a73626d5167595856306232646c626d56795958526c5a43426a5a584a304d51347744415944565151444577566862476c6a5a5441650a467730794d6a41344d4467774e6a4d314d7a6c61467730794d7a45774d444d774e6a4d314d7a6c614d444578487a416442674e5642416f54466d78755a4342680a645852765a3256755a584a686447566b49474e6c636e5178446a414d42674e5642414d544257467361574e6c4d466b77457759484b6f5a497a6a3043415159490a4b6f5a497a6a3044415163445167414578375568773146647543444f7a42456d634f346c374f6a33476b47674e734b75337a36454761782b39713042546655320a4d48336435396b45466a3534517562685739746942797669594d6e736633314f4537733744714f4278544342776a414f42674e56485138424166384542414d430a41715177457759445652306c42417777436759494b775942425155484177457744775944565230544151482f42415577417745422f7a416442674e56485134450a4667515572683771416c497875576e6a56536e4779352f4d4e77563454636f77617759445652305242475177596f4946595778705932574343577876593246730a6147397a644949465957787059325743446e4276624746794c5734304c57467361574e6c67675231626d6c3467677031626d6c346347466a61325630676764690a64575a6a623235756877522f4141414268784141414141414141414141414141414141414141414268775373464141454d416f4743437147534d343942414d430a41306b414d455943495143305536414d4a5a2b2f506c6859567a505736793637746877566b316743525243386d4c416c6e37752b4d514968414d675a6e4944370a7265727147474555386334622f6967697479776a36516737415a6e354c65306f696a6c450a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a"
    })

    lnd_rest = una.Node("LndRest", config_lnd_rest)
    print(await lnd_rest.get_info())
    newInvoice = await lnd_rest.create_invoice(invoice)
    print(newInvoice)
    print(await lnd_rest.get_invoice(newInvoice["payment_hash"]))
    print(await lnd_rest.pay_invoice(dict({
        "payment_request": "lnbcrt500u1p30l86jsp5t8da6ptufsqmaeq82ggj459t0xaagr2zavd3rfjgq67ld2vxq70qpp59an0dyn45jp87ae8jkqxxmt5v3m2nlfvc274l097tehzeh5y06nsdpz2phkcctjypykuan0d93k2grxdaezqcn0vgxqyjw5qcqp2rzjqf6tlmcyzxx6j6td5scpr45cwjd850fyu5y9rqk3vfdygjsv8xxezqqqwgqqqqgqqqqqqqlgqqqqqqgq9q9qyysgqsclv524vlt3mumew6wsw25xszlr6zscn29w0g5ryhg67xvl89jsj9u4ylvqu65p7up07vuuee20hcfg2v5qfqzqk9f8vpwktuct6fwcq78fxyn"
    })))

async def cln_grpc():
    config_cln_grpc = dict({
        "url": "https://localhost:11002",
        "tls_certificate": "2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0d0a4d4949426354434341526967417749424167494a415065324934484e463673474d416f4743437147534d343942414d434d4259784644415342674e5642414d4d0d0a43324e73626942536232393049454e424d434158445463314d4445774d5441774d4441774d466f59447a51774f5459774d5441784d4441774d444177576a41570d0a4d52517745675944565151444441746a62473467556d3976644342445154425a4d424d4742797147534d34394167454743437147534d343941774548413049410d0a424e30454c4e62366a3477674d693761695455322b79334c444272754a71546d672f533361772f50756d58785a71674c6a746d6a654e746f6f6a44364474654d0d0a4931444a4877354366765777796a6d72496455587346616a5454424c4d426b4741315564455151534d42434341324e73626f494a6247396a5957786f62334e300d0a4d4230474131556444675157424251477178664e67534f32393055445254786a4a7a6a65774364534e44415042674e5648524d4241663845425441444151482f0d0a4d416f4743437147534d343942414d43413063414d4551434941765a4b39647a6344356a6f7a7347666473493346685032337a364754656773384a695a574b530d0a5479597a416941546f7970426f4c77684d33645443764f3679626248626375422f78532f62665458765336774749453774773d3d0d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0d0a",
        "tls_client_certificate": "2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0d0a4d494942526a4342374b41444167454341676b4132595a375737573739526777436759494b6f5a497a6a304541774977466a45554d424947413155454177774c0d0a5932787549464a7662335167513045774942634e4e7a55774d5441784d4441774d444177576867504e4441354e6a41784d4445774d4441774d4442614d426f780d0a4744415742674e5642414d4d44324e736269426e636e426a49454e73615756756444425a4d424d4742797147534d34394167454743437147534d3439417745480d0a413049414248454b66516b6763733930516c36522f686e31305331482b676b6169455975646d327a6d647665374e494e51464d7179533879546b674c6a474c780d0a613072376e2b394e5a4351334a5041357a424e42646f6b3941586d6a485441624d426b4741315564455151534d42434341324e73626f494a6247396a5957786f0d0a62334e304d416f4743437147534d343942414d4341306b414d4559434951443462584675435832534f34744d2f4a4258376b32514a49494d3369726c533633550d0a46534475736272437777496841496c656435564854327547302b454135335a7a6677354a70477374563659526a52424e445a6d45783479340d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0d0a",
        "tls_client_key": "2d2d2d2d2d424547494e2050524956415445204b45592d2d2d2d2d0d0a4d494748416745414d424d4742797147534d34394167454743437147534d343941774548424730776177494241515167756c4e4532566247504a6a4c2b6b322b0d0a6f334249584b533032434657423663356f46363968516270566b796852414e4341415278436e304a49484c5064454a656b66345a39644574522f6f4a476f68470d0a4c6e5a7473356e6233757a53445542544b736b764d6b3549433478693857744b2b352f765457516b4e7954774f6377545158614a505146350d0a2d2d2d2d2d454e442050524956415445204b45592d2d2d2d2d0d0a",
    })

    cln_grpc = una.Node("ClnGrpc", config_cln_grpc)
    print(await cln_grpc.get_info())
    newInvoice = await cln_grpc.create_invoice(invoice)
    print(newInvoice)
    print(await cln_grpc.get_invoice(newInvoice["payment_hash"]))
    print(await cln_grpc.pay_invoice(dict({
        "payment_request": "lnbcrt500u1p30l8sqpp5w7lv678lvu6y79607slk7ucz9swnsr8hl0946nnpy6j5ey27xazsdqqcqzpgxqyz5vqsp5mtnhgzrvduh2dw6kvnrpa8asx2rdz6wqum9exla2nwfxmuqw2y6q9qyyssqtak8660yd9ne2u52tctnpsgyj97gsqt572sg6lp76dwanv0a43w3y9gavap4kkn4uzcedmjstachapkhuyex9ascy08wvx69v6xkrysq49fg6k"
    })))

async def eclair_rest():
    config_eclair_rest = dict({
        "url": "http://127.0.0.1:8283",
        "username": "",
        "password": "eclairpw"
    })

    eclair_rest = una.Node("EclairRest", config_eclair_rest)
    print(await eclair_rest.get_info())
    newInvoice = await eclair_rest.create_invoice(invoice)
    print(newInvoice)
    print(await eclair_rest.get_invoice(newInvoice["payment_hash"]))
    print(await eclair_rest.pay_invoice(dict({
        "payment_request": "lnbcrt500u1p30l8ucsp5g2yz97eklymf2j5l6s0ukhn00xnkjh77ycjrmya0ve0k7yvfxu7spp5l33rnrfhrmlhe84theeu6kr5mjnntncewnzvdgctqfwnt9v4ky8qdpz2phkcctjypykuan0d93k2grxdaezqcn0vgxqyjw5qcqp2rzjqf6tlmcyzxx6j6td5scpr45cwjd850fyu5y9rqk3vfdygjsv8xxezqqqwgqqqqgqqqqqqqlgqqqqqqgq9q9qyysgqcv0etwph6zxa68rgezshmgy42z2f4e6xzdvjy64ayyeuy4e25u59gxtqsrftj9fq9k5vpcmurtgdq3x3d2chezl0g6cjg8v4g5th46sp23tz4q"
    })))

# asyncio.run(lnd_rest())
# asyncio.run(cln_grpc())
asyncio.run(eclair_rest())